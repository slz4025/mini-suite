{% if show %}
<div id="command-palette" class="open">
  <div id="command-palette-input" class="command-palette-section">
    <fieldset>
      <legend>INPUT</legend>
      <form
        hx-post="/new"
        hx-target="#null"
        hx-swap="outerHTML"
        enctype="multipart/form-data"
      >
        <label for="new-button">NEW</label>
        <input type="submit" value="➕" id="new-submit" />
      </form>
      <form>
        <label for="open-file">📂 OPEN</label>
        <span id="open-file">
          {{ open_entry_selector|safe }}
        </span>
      </form>
      <form
        hx-post="/import"
        hx-target="#blocks"
        hx-swap="outerHTML"
        enctype="multipart/form-data"
      >
        <label for="import-file">IMPORT FROM MARKDOWN</label>
        <input type="file" name="input" id="import-file" />
        <input type="submit" value="⬏" id="import-submit" />
      </form>
    </fieldset>
  </div>
  <div id="command-palette-output" class="command-palette-section">
    <fieldset>
      <legend>OUTPUT</legend>
      <form
        hx-post="/export"
        hx-target="#null"
        hx-swap="outerHTML"
        enctype="multipart/form-data"
      >
        <label for="export-filename">EXPORT TO HTML</label>
        <input type="text" name="input" id="export-filename" />
        <input type="submit" value="⬎" id="export-submit" />
      </form>
    </fieldset>
  </div>

  <div id="command-palette-key-maps" class="command-palette-section">
    <p class="help">Render block: [Shift+Enter]</p>
    <p class="help">Prev block: [Shift+Up]</p>
    <p class="help">Next block: [Shift+Down]</p>
  </div>
  <div
    id="command-palette-settings"
    class="command-palette-section"
    style="display: flex; align-items: center;"
  >
    {{ mode_button|safe }}
    <button
      id="collapse-button"
      hx-put="/command-palette/close"
      hx-trigger="click"
      hx-target="body"
      hx-swap="outerHTML"
      style="font-size: 1.25rem; height: 2rem; width: 2rem;"
    >
      <span>⇱</span>
    </button>
  </div>
</div>
{% else %}
<div id="command-palette" class="close">
  <button
    id="expand-button"
    hx-put="/command-palette/open"
    hx-trigger="click"
    hx-target="body"
    hx-swap="outerHTML"
    style="font-size: 1.25rem; height: 2rem; width: 2rem;"
  >
    <span>⇲</span>
  </button>
</div>
{% endif %}
