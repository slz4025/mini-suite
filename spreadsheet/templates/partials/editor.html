<div
  id="editor"
  class="section"
  hx-put="/editor"
  hx-trigger="editor from:body"
  hx-target="this"
  hx-swap="outerHTML"
  style="display: {{ 'none' if not show_editor else 'inherit' }};"
>
  <h2>EDITOR</h2>

  {% if show_help %}
  <p>
    Ctrl+click on a cell or navigate around using
    Tab (right), Shift+Tab (left), Enter (down), Shift+Enter (up)
    to change the cell in focus.
  </p>
  <p>
    This editor allows you to view and manipulate the
    underlying value or formula of the currently focused cell.
    To express the value using a formula, type Python code
    within angle brackets.
  <p>
  </p>
    Refer to a selection of other cells:
      <code>ROWS&lt;rs:re&gt;</code>,
      <code>COLS&lt;cs:ce&gt;</code>,
      <code>BOX&lt;rs:re,cs:ce&gt;</code>,
    where
      <code>rs</code> = inclusive-start index of row range,
      <code>re</code> = exclusive-end index of row range,
      <code>cs</code> = inclusive-start index of column range,
      <code>ce</code> = exclusive-end index of column range.
  </p>
  <p>
    To refer to the current cell's row index, use <code>CURR_ROW</code>.
    To refer to the current cell's column index, use <code>CURR_COL</code>.
  </p>
  <p>
    Cast the values within the selection:
      <code>INT&lt;sel&gt;</code>,
      <code>FLOAT&lt;sel&gt;</code>,
    where
      <code>sel</code> is the selection.
  </p>
  {% endif %}

  {% if editing %}
  <form
    hx-put="/cell/{{ row }}/{{ col }}/update"
    hx-target="#port"
    hx-swap="innerHTML"
    enctype="multipart/form-data"
  >
    <textarea
      id="editor-contents"
      name="input-cell-{{ row }}-{{ col }}"
      rows=5,
      style="width: 100%;"
      >{{ data }}</textarea>
    <input
      id="editor-submit"
      type="submit"
      value="â†µ"
    />
  </form>
  {% endif %}
</div>
