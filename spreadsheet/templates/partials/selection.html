<div
  id="selection"
  class="section"
  style="display: {{ 'inherit' if show_selection else 'none' }};"
>
  <h1 class="command-palette">SELECTION</h1>

  {% if show_help %}
  <p class="command-palette">
    You can Shift+Click and drag within the grid to make a box selection, which will appear here.
    Additionally, you can Click on a row or column header to make a selection of rows or columns respectively.
  </p>
  {% endif %}

  <form
    hx-post="/selection"
    hx-target="#selection"
    hx-swap="outerHTML"
    enctype="multipart/form-data"
  >
    <fieldset>
      <legend>Mode</legend>

      {% if show_help %}
      <p class="command-palette">
        Indices start from 0. Ranges are inclusive.
      </p>
      {% endif %}

      <label for="selection-mode" hidden>Mode</label>
      <select
        id="selection-mode"
        name="mode"
        hx-get="/selection/input"
        hx-target="#selection-input"
        hx-swap="outerHTML"
      >
        {% for mode_option in mode_options %}
        {% if mode_option == mode or (not mode and loop.index == 0) %}
        <option value="{{ mode_option }}" selected>{{ mode_option }}</option>
        {% else %}
        <option value="{{ mode_option }}">{{ mode_option }}</option>
        {% endif %}
        {% endfor %}
      </select>
    </fieldset>

    {{ input|safe }}

    <div class="inner" style="display: flex;">
      <input
        type="submit"
        value="â†µ"
        id="selection-submit"
        style="margin: 0.25rem;"
      />
      <button
          id="selection-clear"
          class="icon justify"
          hx-delete="/selection"
          hx-trigger="click"
          hx-target="#selection"
          hx-swap="outerHTML"
          style="font-size: 0.8rem; margin: 0.25rem; width: {{ 'auto' if show_help else '' }}; height: {{ 'auto' if show_help else '' }};"
          title="clear selection"
      >
        <span>ðŸ—‘</span>
        {% if show_help %}
          <span>Clear [Ctrl+Y]</span>
        {% endif %}
    </button>
    </div>

    {% if show_adjustments %}
    <div class="inner" style="margin-bottom: 0;">
      {% if show_row_adjustments %}
      <button
        id="up-selection-button"
        class="icon"
        hx-post="/selection/move/up"
        hx-trigger="click"
        hx-target="#selection"
        hx-swap="outerHTML"
        title="shrink selection up"
        style="width: {{ 'auto' if show_help else '' }}; height: {{ 'auto' if show_help else '' }};"
      >
        <span>â–²</span>
        {% if show_help %}
          <span>Shrink up [Ctrl+Q]</span>
        {% endif %}
      </button>

      <button
        id="down-selection-button"
        class="icon"
        hx-post="/selection/move/down"
        hx-trigger="click"
        hx-target="#selection"
        hx-swap="outerHTML"
        title="expand selection down"
        style="width: {{ 'auto' if show_help else '' }}; height: {{ 'auto' if show_help else '' }};"
      >
        <span>â–¼</span>
        {% if show_help %}
          <span>Expand down [Ctrl+W]</span>
        {% endif %}
      </button>
      {% endif %}

      {% if show_col_adjustments %}
      <button
        id="left-selection-button"
        class="icon"
        hx-post="/selection/move/left"
        hx-trigger="click"
        hx-target="#selection"
        hx-swap="outerHTML"
        title="shrink selection left"
        style="width: {{ 'auto' if show_help else '' }}; height: {{ 'auto' if show_help else '' }};"
      >
        <span>â—€</span>
        {% if show_help %}
          <span>Shrink left [Ctrl+E]</span>
        {% endif %}
      </button>

      <button
        id="right-selection-button"
        class="icon"
        hx-post="/selection/move/right"
        hx-trigger="click"
        hx-target="#selection"
        hx-swap="outerHTML"
        title="expand selection right"
        style="width: {{ 'auto' if show_help else '' }}; height: {{ 'auto' if show_help else '' }};"
      >
        <span>â–¶</span>
        {% if show_help %}
          <span>Expand right [Ctrl+R]</span>
        {% endif %}
      </button>
      {% endif %}
    </div>
    {% endif %}
  </form>
</div>
